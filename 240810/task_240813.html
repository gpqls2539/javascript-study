<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      "use strict";

      const students = [
        {
          id: 1,
          name: "홍길동",
          level: "C",
          age: 16,
          grade: "10학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "수학"],
        },
        {
          id: 2,
          name: "김철수",
          level: "B",
          age: 17,
          grade: "11학년",
          major: "이과",
          subjects: ["물리", "화학", "수학", "영어"],
        },
        {
          id: 3,
          name: "이영희",
          level: "C",
          age: 15,
          grade: "9학년",
          major: "문과",
          subjects: ["국어", "영어", "사회"],
        },
        {
          id: 4,
          name: "박민수",
          level: "A",
          age: 18,
          grade: "12학년",
          major: "이과",
          subjects: ["물리", "화학", "수학"],
        },
        {
          id: 5,
          name: "최지은",
          level: "C",
          age: 16,
          grade: "10학년",
          major: "예체능",
          subjects: ["미술", "체육", "음악", "국어"],
        },
        {
          id: 6,
          name: "강동훈",
          level: "A",
          age: 17,
          grade: "11학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "미술"],
        },
        {
          id: 7,
          name: "정수현",
          level: "B",
          age: 15,
          grade: "9학년",
          major: "이과",
          subjects: ["수학", "과학", "영어"],
        },
        {
          id: 8,
          name: "오진우",
          level: "C",
          age: 18,
          grade: "12학년",
          major: "예체능",
          subjects: ["체육", "음악", "미술"],
        },
        {
          id: 9,
          name: "서유리",
          level: "B",
          age: 16,
          grade: "10학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "역사"],
        },
        {
          id: 10,
          name: "하준호",
          level: "A",
          age: 17,
          grade: "11학년",
          major: "이과",
          subjects: ["수학", "물리", "화학", "영어"],
        },
      ];


      // ** 모든 과목 분류 -- 240810 과제
      const subject = students.reduce((prev, cur) => {
        // 01) subjects 배열을 풀기 위해 for문 사용 (subjects 배열의 length 값 만큼 돌리기)
        // console.log('test', cur.subjects)
        for (let i = 0; i < cur.subjects.length; i++) {
          // console.log('test', cur.subjects[i], i)
          if(! Object.hasOwn(prev, cur.subjects[i])) {
            // 02) prev안에 cur.subject[i]가 없다면 -> prev[cur.subjects[i]](과목명)는 [cur](그 과목을 듣는 학생) 
            prev[cur.subjects[i]] = [cur];
          } else {
            // 03) ~ 있다면 -> prev[cur.subjects[i]] 안에 학생들을 밀어 넣기
            prev[cur.subjects[i]].push(cur);
          }
        }
        return prev;
      }, {});
      console.log('과제01) 모든 과목 분류', subject);

      console.log('========================')

      // ** 생성자 함수로 전환 -- 240810 과제

      // 01) 생성자 함수로 전환
      function Students(item = []) {
        this.item = item;
      }

      Students.prototype.addStudent = function() {
        return this.item;
      }

      const student1 = new Students(
        {
          id: 1,
          name: "홍길동",
          level: "C",
          age: 16,
          grade: "10학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "수학"],
        },
      );
      const student2 = new Students(
        {
          id: 2,
          name: "김철수",
          level: "B",
          age: 17,
          grade: "11학년",
          major: "이과",
          subjects: ["물리", "화학", "수학", "영어"],
        },
      );
      const student3 = new Students(
        {
          id: 3,
          name: "이영희",
          level: "C",
          age: 15,
          grade: "9학년",
          major: "문과",
          subjects: ["국어", "영어", "사회"],
        },
      );
      const student4 = new Students(
        {
          id: 4,
          name: "박민수",
          level: "A",
          age: 18,
          grade: "12학년",
          major: "이과",
          subjects: ["물리", "화학", "수학"],
        },
      );
      const student5 = new Students(
        {
          id: 5,
          name: "최지은",
          level: "C",
          age: 16,
          grade: "10학년",
          major: "예체능",
          subjects: ["미술", "체육", "음악", "국어"],
        },
      );
      const student6 = new Students(
        {
          id: 6,
          name: "강동훈",
          level: "A",
          age: 17,
          grade: "11학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "미술"],
        },
      );
      const student7 = new Students(
        {
          id: 7,
          name: "정수현",
          level: "B",
          age: 15,
          grade: "9학년",
          major: "이과",
          subjects: ["수학", "과학", "영어"],
        },
      );
      const student8 = new Students(
        {
          id: 8,
          name: "오진우",
          level: "C",
          age: 18,
          grade: "12학년",
          major: "예체능",
          subjects: ["체육", "음악", "미술"],
        },
      );
      const student9 = new Students(
        {
          id: 9,
          name: "서유리",
          level: "B",
          age: 16,
          grade: "10학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "역사"],
        },
      );
      const student10 = new Students(
        {
          id: 10,
          name: "하준호",
          level: "A",
          age: 17,
          grade: "11학년",
          major: "이과",
          subjects: ["수학", "물리", "화학", "영어"],
        },
      );

      // 02) 배열 생성 후 집어 넣기
      const studentArr = [];
      // for (let i = 0; i < array.length; i++) {
      //   const element = array[i];
        
      // }
      studentArr.push(
        student1.addStudent(),
        student2.addStudent(),
        student3.addStudent(),
        student4.addStudent(),
        student5.addStudent(),
        student6.addStudent(),
        student7.addStudent(),
        student8.addStudent(),
        student9.addStudent(),
        student10.addStudent(),
      )
      console.log('과제02) 생성자 함수로 전환 ', studentArr)
      </script>
  </body>
</html>
