<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      "use strict!";

      /**
       * 배열의 iterator 함수
       * 객체가 iterable 객체여야 한다.
       * 이터러블 객체가 되기 위한 조건 = Symbol.iterator 속성을 반드시 가지고 있어야한다.
       */

      const students = [
        {
          id: 1,
          name: "홍길동",
          age: 16,
          grade: "10학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "수학"],
        },
        {
          id: 2,
          name: "김철수",
          age: 17,
          grade: "11학년",
          major: "이과",
          subjects: ["물리", "화학", "수학", "영어"],
        },
        {
          id: 3,
          name: "이영희",
          age: 15,
          grade: "9학년",
          major: "문과",
          subjects: ["국어", "영어", "사회"],
        },
        {
          id: 4,
          name: "박민수",
          age: 18,
          grade: "12학년",
          major: "이과",
          subjects: ["물리", "화학", "수학"],
        },
        {
          id: 5,
          name: "최지은",
          age: 16,
          grade: "10학년",
          major: "예체능",
          subjects: ["미술", "체육", "음악", "국어"],
        },
        {
          id: 6,
          name: "강동훈",
          age: 17,
          grade: "11학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "미술"],
        },
        {
          id: 7,
          name: "정수현",
          age: 15,
          grade: "9학년",
          major: "이과",
          subjects: ["수학", "과학", "영어"],
        },
        {
          id: 8,
          name: "오진우",
          age: 18,
          grade: "12학년",
          major: "예체능",
          subjects: ["체육", "음악", "미술"],
        },
        {
          id: 9,
          name: "서유리",
          age: 16,
          grade: "10학년",
          major: "문과",
          subjects: ["국어", "영어", "사회", "역사"],
        },
        {
          id: 10,
          name: "하준호",
          age: 17,
          grade: "11학년",
          major: "이과",
          subjects: ["수학", "물리", "화학", "영어"],
        },
      ];

      // Array.map((현재값, 인덱스, 원본 배열) = {})
      // map은 객체를 기본적으로 복사해서 반환한다. (원본에 영향 x)
      // 배열의 길이 그대로 return 되는 값으로 변환한다.

      // 화살표 함수에서 block({}) 없이 한줄로 값을 넣으면 암묵적으로 return이 적용된다.
      // 한줄일 때 객체 반환은 반드시 block을 object로 인식하기 때문에 실행 블럭 ()을 사용해서 반환해야한다.
      // 2줄 이상은 반드시 block 내에 return을 사용해서 반환한다.
      const mapArr = students.map((student) => ({
        ...student,
        age: student.age + 10,
      }));
      console.log("mapArr", mapArr);

      // Array.filter((현재값, 인덱스, 원본 배열) => boolean)
      // filter는 return되는 boolean 조건에 따라 배열이 필터링되서 새로운 배열로 반환된다.
      // 빈 배열이 되더라도 반드시 배열 반환은 한다.
      const filterArr = students.filter((student) => student.age >= 17);
      console.log("filterArr", filterArr);

      // Array.find((현재값, 인덱스, 원본 배열) => boolean)
      // 조건이 true가 되는 값 중에 가장 첫번째 값 1개만 반환한다.
      // 못 찾으면 undefined가 반환됨
      const findStudent1 = students.find(
        (student) => student.name === "김철수"
      );
      console.log("findStudent1", findStudent1.major);

      const findStudent2 = students.find(
        (student) => student.name === "남혜빈"
      );

      // Array.findIndex((현재값, 인덱스, 원본 배열) => boolean)
      // 조건이 true가 되는 값 중에 가장 첫번째 값의 인덱스를 반환한다.
      // 못 찾으면 -1가 반환됨
      const findIndexStudent1 = students.findIndex(
        (student) => student.name === "하준호"
      );
      console.log("findIndexStudent1", findIndexStudent1);

      const findIndexStudent2 = students.findIndex(
        (student) => student.name === "남혜빈"
      );
      console.log("findIndexStudent2", findIndexStudent2);

      // optional chaining
      // 객체 속성에서 ? 이후의 속성을 못 찾을 경우 에러가 아니라 undefined를 강제로 반환
      console.log("findStudent2", findStudent2?.major);

      // Array.some((현재값, 인덱스, 원본 배열) => boolean)
      // 반환값으로 true 혹은 false만 반환한다.
      // 내부 조건에 의해서 1개라도 조건이 맞으면 true, 다 안맞으면 false
      const someArr = students.some((student) => student.age > 17);
      console.log("someArr", someArr);

      // Array.every((현재값, 인덱스, 원본 배열) => boolean)
      // 반환값으로 true 혹은 false만 반환한다.
      // 내부 조건이 전부 true여야 true, 한개라도 false면 false
      const everyArr = students.every((student) => student.age > 20);
      console.log("everyArr", everyArr);

      // Array.flat(depth)
      // 이차원 이상인 배열을 depth 숫자만큼 배열을 풀어준다.
      const arr = [
        [1, 2, 3, [10, 11, [12, 13]]],
        [4, 5, 6],
        [7, 8, 9],
      ];
      const flatArray = arr.flat(3);
      console.log("faltArray", flatArray);

      // Array.flatMap((현재값, 인덱스, 원본 배열) = {})
      const flatMapArr = students.flatMap((student) => student.subjects);
      const flatMapArr2 = students.map((student) => student.subjects);
      console.log("flatMapArr", flatMapArr);
      console.log("flatMapArr", flatMapArr2);
    </script>
  </body>
</html>
